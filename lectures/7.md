# Lecture 7: Implementation · Investigating Mysteries

1. The goal isn’t necessarily to solve the mysteries, but to investigate them methodically.
2. Think out loud. Share your thoughts. Ask questions. When investigating alone, use a [rubber duck](https://en.wikipedia.org/wiki/Rubber_duck_debugging).
3. Reproduce the problem on your machine.
4. Establish what you expected to occur, and what really occurred.
5. Find a [minimal working example](https://en.wikipedia.org/wiki/Minimal_working_example). Break the problem in smaller pieces and get rid of the nonessential parts.
6. Try variations on the problem: different data, different browsers, different tools, different machines, and so forth.
7. Challenge your assumptions. If you think you know something, come up with an experiment to prove it.

# The Mystery of the Magic Island

I was born in an island in Brazil called Florianópolis. Some people call it the [Magic Island](http://placestovisitbrazil.com/florianopolis-magic-island/). Indeed, there seems to be something magic about it. Check the following snippet in the JavaScript Console in Google Chrome:

```javascript
const islandsInBrazil = [
  "Fernando de Noronha",
  "Ilha do Mel",
  "Florianópolis",
  "Ilha Grande"
];
const islandChoice = prompt("Choose an island in Brazil", "Florianópolis");
if (islandsInBrazil.includes(islandChoice)) {
  alert("You’re right. This is an island in Brazil.");
} else {
  alert("You’re wrong. This is not an island in Brazil.");
}
```

**What’s going on?**

# The Mystery That Doesn’t Add Up

This Sunday I’ll turn 29 years old. Right now I’d say I’m 28.8 years old, and after this lecture I’ll be a bit older, say 0.1 years older. I think that’ll make me 28.9 years old, but I’m not sure because I’m terrible at arithmetic. I wrote a JavaScript program to check my answer, but it doesn’t seem to work every time. Could this be because I was born on the Magic Island?

```javascript
alert("Welcome to Leandro’s age calculation checker");
const leandrosCurrentAge = Number(prompt("Leandro’s current age", "28.1"));
const ageIncrementAfterLecture = Number(
  prompt("Age increment after lecture", "0.1")
);
const expectedAgeAfterLecture = Number(
  prompt("Expected age after lecture", "28.9")
);
const ageAfterLecture = leandrosCurrentAge + ageIncrementAfterLecture;
if (ageAfterLecture === expectedAgeAfterLecture) {
  alert("You got the math right!");
} else {
  alert("You got the math wrong!");
}
```

**What’s going on?**

# The Mystery of That Which Wasn’t Itself

While I was investigating the problem above, I changed the line that says `ageAfterLecture === expectedAgeAfterLecture` to `ageAfterLecture === ageAfterLecture`. Surely `ageAfterLecture` should be equal to itself, but somehow I still got an alert saying “You got the math wrong!”. If only I could remember which values I had input…

```javascript
alert("Welcome to Leandro’s age calculation checker");
const leandrosCurrentAge = Number(prompt("Leandro’s current age", "28.1"));
const ageIncrementAfterLecture = Number(
  prompt("Age increment after lecture", "0.1")
);
const expectedAgeAfterLecture = Number(
  prompt("Expected age after lecture", "28.9")
);
const ageAfterLecture = leandrosCurrentAge + ageIncrementAfterLecture;
if (ageAfterLecture === ageAfterLecture) {
  alert("You got the math right!");
} else {
  alert("You got the math wrong!");
}
```

**What’s going on?**

# The Mystery of That Which Was Itself

<small>
For your convenience, I put the [code from this mystery](https://github.com/jhu-oose/todoose/commit/d753b15561ccc4c9ec31f0458f3ec4e0d5ea0582) in the [`the-mystery-of-that-which-was-itself`](https://github.com/jhu-oose/todoose/tree/the-mystery-of-that-which-was-itself) branch in [TODOOSE](https://github.com/jhu-oose/todoose).
</small>

I was playing with the creation of TODO items in TODOOSE. I wanted to check that it really increased the number of TODO items, so I included some debugging `console.log()`s in the `PlusButton` component. Most times it worked as I expected, but sometimes when I clicked on the plus button I got a result that surprised me.

```javascript
class PlusButton extends React.Component {
  async handleClick() {
    console.log(`Before: ${await this.countItems()}`);
    fetch("/items", { method: "POST" });
    console.log(`After: ${await this.countItems()}`);
  }

  async countItems() {
    return (await (await fetch("/items")).json()).length;
  }

  // ...
}
```

**What’s going on?**

# Announcements

The [Overview Presentations](/group-projects#presentations) are coming up. Follow [our recommendations for a good presentation](/group-projects#recommendations-for-a-good-presentation).

[Go watch Sandi Metz on this year’s Association for Computing Machinery Lecture Series in Memory of Nathan Krasnopoler!](https://www.cs.jhu.edu/news-events/association-for-computing-machinery-lecture-in-memory-of-nathan-krasnopoler/)

We’ll also have a session with Sandi just for OOSE students this Tuesday, 2019-10-22, 14:30–15:00!
